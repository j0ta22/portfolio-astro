---
import { type ProjectsAPI } from "../types/api";
import CardProjects from "./CardProjects.astro";
const res = await fetch(
  "https://portfolio-api-gmun.onrender.com/api/projects",
  {
    method: "POST",
    headers: {
      "Content-type": "application/json",
    },
    body: JSON.stringify({
      query: {},
      options: {
        sort: {
          date_unix: "asc",
        },
        limit: 12,
      },
    }),
  }
);
const data = (await res.json()) as ProjectsAPI;
console.log(data);
---

<div class="grid gap-8 sm:grid-cols-2 lg:grid-cols-3">
  {
    data.map(({ title, description, image_url, url }:any) => (
      <CardProjects
        image_url={image_url}
        title={title}
        description={description}
        url={url}
      />
    ))
  }
</div>